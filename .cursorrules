# Cursor Rules for Lee Homepage Project

## Project Overview
This is a static website project designed for Netlify hosting. The project uses vanilla HTML, CSS, and JavaScript.

## File Structure
- `index.html` - Main HTML file
- `styles.css` - All styling
- `script.js` - JavaScript functionality
- `netlify.toml` - Netlify configuration
- `netlify/functions/` - Serverless functions (for Stripe integration, webhooks, etc.)

## Coding Standards

### HTML
- Use semantic HTML5 elements
- Always include proper meta tags (viewport, charset, description)
- Use meaningful class and ID names
- Follow accessibility best practices (alt tags, ARIA labels where needed)

### CSS
- Use modern CSS features (flexbox, grid, CSS variables)
- **ALWAYS follow mobile-first responsive design approach**
- Use consistent spacing and typography
- Keep styles organized and commented
- Use CSS custom properties for theming when appropriate
- **Mobile Responsiveness Requirements:**
  - All pages MUST be fully functional and visually appealing on mobile devices (320px and up)
  - Use Tailwind responsive breakpoints: `sm:` (640px), `md:` (768px), `lg:` (1024px), `xl:` (1280px)
  - Test all interactive elements (buttons, forms, navigation) on mobile
  - Ensure text is readable without zooming (minimum 16px font size for body text)
  - Navigation must have a mobile menu that works on all screen sizes
  - Forms and inputs must be easily tappable (minimum 44x44px touch targets)
  - Images and media must scale appropriately
  - Grid layouts should stack vertically on mobile (use `grid-cols-1` as base)
  - Padding and margins should be reduced on mobile for better space utilization
  - All modals, dropdowns, and overlays must work on mobile
  - Horizontal scrolling should be avoided
  - Touch gestures should be considered for mobile interactions

### JavaScript
- Use modern ES6+ syntax
- Keep functions small and focused
- Add comments for complex logic
- Handle errors gracefully
- Ensure cross-browser compatibility

## Netlify Deployment
- The site is configured for static hosting
- No build process required
- All files in root directory are published
- Redirects are configured in `netlify.toml`

## Best Practices
- Keep code clean and well-commented
- **Test on multiple browsers and devices (especially mobile)**
- Optimize images before adding them
- Use relative paths for internal links
- Ensure all external links open in new tabs when appropriate
- Follow SEO best practices
- **Mobile Testing Checklist:**
  - Test on actual mobile devices when possible
  - Use browser dev tools to test different screen sizes
  - Verify navigation menu works on mobile
  - Check that all buttons and links are easily tappable
  - Ensure forms are usable on mobile keyboards
  - Verify text is readable without horizontal scrolling
  - Test cart functionality on mobile
  - Verify checkout process works on mobile
  - Check that images and videos load properly on mobile
  - Ensure social media links work on mobile

## Performance
- Minimize external dependencies
- Optimize CSS and JavaScript
- Use efficient selectors
- Consider lazy loading for images if added later

## Stripe Integration

### Payment Processing Setup
- Use **Stripe Checkout** for the simplest integration (redirects to Stripe-hosted page)
- For embedded payments, use **Stripe Elements** with proper security measures
- Never expose secret keys in client-side code
- Use **publishable keys** in frontend, **secret keys** only in serverless functions

### Netlify Functions for Stripe
- Create serverless functions in `netlify/functions/` directory
- Use Netlify Functions for:
  - Creating Checkout Sessions
  - Handling webhooks
  - Processing payments securely
- Store Stripe secret keys as Netlify environment variables
- Access via `process.env.STRIPE_SECRET_KEY` in functions

### Implementation Guidelines
- **Checkout Flow**: 
  - Create a function endpoint (e.g., `netlify/functions/create-checkout.js`)
  - Call from frontend JavaScript to create session
  - Redirect user to Stripe Checkout URL
  - Handle success/cancel redirects

- **Webhook Handling**:
  - Create `netlify/functions/stripe-webhook.js`
  - Verify webhook signatures using Stripe webhook secret
  - Handle events: `checkout.session.completed`, `payment_intent.succeeded`, etc.
  - Update user access or send confirmation emails

- **Security Best Practices**:
  - Always verify webhook signatures
  - Use HTTPS for all payment-related requests
  - Validate amounts and currency on server-side
  - Never trust client-side data for payment processing
  - Use Stripe's test mode during development

### Environment Variables
- Add to Netlify dashboard: Site settings â†’ Environment variables
- Required variables:
  - `STRIPE_SECRET_KEY` (for serverless functions)
  - `STRIPE_PUBLISHABLE_KEY` (for frontend)
  - `STRIPE_WEBHOOK_SECRET` (for webhook verification)
- Use `.env` file locally (add to `.gitignore`)

### Example Function Structure
```javascript
// netlify/functions/create-checkout.js
const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);

exports.handler = async (event) => {
  // Create checkout session
  // Return session URL
};
```

### Frontend Integration
- Load Stripe.js from CDN: `https://js.stripe.com/v3/`
- Initialize with publishable key
- Create checkout sessions via fetch to Netlify function
- Handle redirects to success/cancel pages

## Community Links
- **Discord Community**: https://discord.gg/UhsYV4aytG
  - Use this link for all Discord buttons and references throughout the site
  - Always open Discord links in a new tab (`target="_blank"`)

## Git Workflow
- Commit messages should be clear and descriptive
- Keep commits focused on single features/fixes
- Don't commit build artifacts or sensitive information
- **NEVER commit** Stripe secret keys, API keys, or `.env` files
